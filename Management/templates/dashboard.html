{% load static %}
{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Auronix Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
        {% tailwind_css %}
  </head>
  <body class="bg-gray-50 flex">
    <!-- Sidebar -->
    <aside class="w-64 bg-[#0b1f3a] text-white min-h-screen">
      <!-- Logo -->
      <div
        class="flex items-center space-x-3 p-4 bg-white rounded-lg shadow-md m-3"
      >
        <!-- Logo Icon -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-10 w-10 text-blue-700"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M13 10V3L4 14h7v7l9-11h-7z"
          />
        </svg>
        <!-- Text -->
        <span class="text-2xl font-bold text-blue-900">Auronix</span>
      </div>
<nav class="mt-6 space-y-2" id="sidebarMenu">

    <a href="#" class="flex items-center px-6 py-2 hover:bg-blue-800 rounded-md">
        <span class="mr-2">ğŸ“Š</span> Dashboard
    </a>

    <a href="{% url 'manageproduct' %}" 
       class="flex items-center px-6 py-2 hover:bg-blue-800 rounded-md">
        <span class="mr-2">ğŸ’»</span> Manage Products
    </a>

    <a href="{% url 'managecategory' %}" 
       class="flex items-center px-6 py-2 hover:bg-blue-800 rounded-md">
        <span class="mr-2">ğŸ›’</span> Manage Category
    </a>

    <a href="#" class="flex items-center px-6 py-2 hover:bg-blue-800 rounded-md">
        <span class="mr-2">ğŸ‘¥</span> Customers
    </a>

    <a href="#" class="flex items-center px-6 py-2 hover:bg-blue-800 rounded-md">
        <span class="mr-2">ğŸ“¦</span> Inventory
    </a>

    <a href="#" class="flex items-center px-6 py-2 hover:bg-blue-800 rounded-md">
        <span class="mr-2">ğŸ—‚ï¸</span> Categories
    </a>

    <a href="#" class="flex items-center px-6 py-2 hover:bg-blue-800 rounded-md">
        <span class="mr-2">ğŸ’°</span> Discounts
    </a>

    <a href="#" class="flex items-center px-6 py-2 hover:bg-blue-800 rounded-md">
        <span class="mr-2">ğŸ“ˆ</span> Reports
    </a>

    <a href="#" class="flex items-center px-6 py-2 hover:bg-blue-800 rounded-md">
        <span class="mr-2">âš™ï¸</span> Settings
    </a>
</nav>

    </aside>

    <!-- Main Section -->
    <main class="flex-1 p-8">
      <!-- Header -->
      <div class="flex justify-between items-center mb-8">
        <div>
          <h1 class="text-2xl font-semibold">Welcome, Admin</h1>
          <p class="text-gray-500">{{ current_date }}</p>
        </div>
        <div class="flex items-center space-x-6">
          <div class="relative">
            <span
              class="absolute -top-2 -right-2 bg-red-500 text-xs text-white rounded-full px-1.5"
              >3</span
            >
            <svg
              class="w-6 h-6 text-gray-600"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V4a2 2 0 10-4 0v1.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
              />
            </svg>
          </div>
          <div class="flex items-center space-x-3">
            <img
              src="{% static 'images/admin-avatar.png' %}"
              alt="Admin"
              class="rounded-full w-10 h-10"
            />
            <div>
              <p class="font-semibold">Admin</p>
              <p class="text-sm text-gray-500">Superuser</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Summary Cards -->
      <div class="grid grid-cols-4 gap-4 mb-8">
        <div class="bg-white rounded-lg shadow p-4 text-center">
          <p class="text-gray-500">Total Products</p>
          <h2 class="text-3xl font-semibold text-blue-700">
            {{ total_product }}
          </h2>
        </div>
        <div class="bg-white rounded-lg shadow p-4 text-center">
          <p class="text-gray-500">Total Category</p>
          <h2 class="text-3xl font-semibold text-blue-700">
            {{ total_category }}
          </h2>
        </div>
        <div class="bg-white rounded-lg shadow p-4 text-center">
          <p class="text-gray-500">Total Customers</p>
          <h2 class="text-3xl font-semibold text-blue-700">
            {{ total_user }}
          </h2>
        </div>
        <div class="bg-white rounded-lg shadow p-4 text-center">
          <p class="text-gray-500">Revenue</p>
          <h2 class="text-3xl font-semibold text-green-600">
            â‚¹{{ total_revenue }}
          </h2>
        </div>
      </div>

      <!-- Tabs Section -->
      <div class="bg-white p-6 rounded-lg shadow">
        <div class="flex space-x-6 border-b pb-2 mb-4">
          <button
            class="tab-btn text-blue-600 font-medium border-b-2 border-blue-600"
            data-tab="overview"
          >
            Overview
          </button>
          <button
            class="tab-btn text-gray-600 hover:text-blue-600"
            data-tab="add-product"
          >
            Add Product
          </button>
          <button
            class="tab-btn text-gray-600 hover:text-blue-600"
            data-tab="add-category"
          >
            Add Category
          </button>
        </div>

        <!-- Overview -->
        <div id="overview" class="tab-content">
          <h2 class="text-2xl font-bold mb-4 text-gray-800">
            ğŸ›’ Latest Orders
          </h2>
          <div class="overflow-x-auto">
            <table
              class="min-w-full border border-gray-200 rounded-lg shadow-md overflow-hidden"
            >
              <thead class="bg-blue-100 border-b">
                <tr
                  class="text-left text-gray-700 uppercase text-sm tracking-wider"
                >
                  <th class="px-6 py-3">Order ID</th>
                  <th class="px-6 py-3">Customer</th>
                  <th class="px-6 py-3">Total</th>
                  <th class="px-6 py-3">Status</th>
                  <th class="px-6 py-3 text-center">Actions</th>
                </tr>
              </thead>
              <tbody class="text-gray-700">
                {% for order in orders %}
                <tr class="border-b hover:bg-blue-50 transition duration-200">
                  <td class="px-6 py-3 font-medium">#{{ order.id }}</td>
                  <td class="px-6 py-3">{{ order.user.username }}</td>
                  <td class="px-6 py-3">â‚¹{{ order.total_amount }}</td>
                  <td class="px-6 py-3">
                    {% if order.status == "Delivered" %}
                    <span
                      class="bg-green-100 text-green-700 px-2 py-1 rounded text-xs"
                      >Delivered</span
                    >
                    {% elif order.status == "Pending" %}
                    <span
                      class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded text-xs"
                      >Pending</span
                    >
                    {% else %}
                    <span
                      class="bg-red-100 text-red-700 px-2 py-1 rounded text-xs"
                      >Cancelled</span
                    >
                    {% endif %}
                  </td>
                  <td class="px-6 py-3 text-center">
                    <a
                      href="{% url 'order_detail' order.id %}"
                      class="text-blue-600 hover:underline"
                      >View</a
                    >
                  </td>
                </tr>
                {% empty %}
                <tr>
                  <td colspan="5" class="text-center py-6 text-gray-500 italic">
                    No recent orders
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>

        <!-- Add Product -->
      <div id="add-product" class="tab-content bg-white shadow rounded-lg p-6">
  <h2 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-2">
    â• Add New Product
  </h2>

  <form method="POST" action="{% url 'add_product' %}" class="space-y-4">
    {% csrf_token %}

    <!-- Product Name -->
    <div>
      <label for="product_name" class="block text-gray-700 font-medium mb-1">Product Name</label>
      <input
        type="text"
        id="product_name"
        name="product_name"
        maxlength="50"
        required
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
        placeholder="Enter product name"
      />
    </div>

    <!-- Description -->
    <div>
      <label for="product_description" class="block text-gray-700 font-medium mb-1">Product Description</label>
      <textarea
        id="product_description"
        name="product_description"
        rows="4"
        required
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
        placeholder="Enter product details"
      ></textarea>
    </div>

    <!-- Price -->
    <div>
      <label for="price" class="block text-gray-700 font-medium mb-1">Price (â‚¹)</label>
      <input
        type="number"
        id="price"
        name="price"
        step="0.01"
        required
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
        placeholder="Enter product price"
      />
    </div>

    <!-- Stock Quantity -->
    <div>
      <label for="product_stock" class="block text-gray-700 font-medium mb-1">Stock Quantity</label>
      <input
        type="number"
        id="product_stock"
        name="product_stock"
        required
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
        placeholder="Enter available stock"
      />
    </div>

    <!-- Availability -->
    <div class="flex items-center space-x-2">
      <input
        type="checkbox"
        id="available"
        name="available"
        class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
      />
      <label for="available" class="text-gray-700 font-medium">Available</label>
    </div>

    <!-- Category -->
    <div>
      <label for="category" class="block text-gray-700 font-medium mb-1">Category</label>
      <select
        id="category"
        name="category"
        required
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
      >
        <option value="">-- Select Category --</option>
            {% for cat in category %}
            <option value="{{ cat.id }}">{{ cat.category_name }}</option>
            {% endfor %}
      </select>
    </div>

    <!-- Submit Button -->
    <div>
      <button
        type="submit"
        class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition duration-200 font-medium"
      >
        ğŸ’¾ Save Product
      </button>
    </div>
  </form>
</div>

        <!-- Add Category -->
        <div id="add-category" class="tab-content hidden">
         <h2 class="text-2xl font-semibold text-gray-800 border-b pb-3 mb-4 flex items-center">
    <span class="text-blue-600 text-3xl mr-2">ğŸ—‚ï¸</span>
    Categories List
  </h2>
  <h2 class="text-2xl font-semibold mb-4 text-gray-800">â• Add New Category</h2>

  <form method="POST" action="{% url 'add_category' %}" class="bg-white p-6 rounded-lg shadow-md mb-8 space-y-4">
    {% csrf_token %}
    <div>
      <label class="block font-medium text-gray-700">Category Name</label>
      <input type="text" name="category_name" placeholder="Enter category name"
             class="w-full border border-gray-300 rounded-lg p-2 focus:ring focus:ring-blue-200" required>
    </div>

    <div>
      <label class="block font-medium text-gray-700">Category Description</label>
      <textarea name="category_description" placeholder="Enter category description"
                class="w-full border border-gray-300 rounded-lg p-2 focus:ring focus:ring-blue-200" required></textarea>
    </div>

    <button type="submit" class="bg-blue-700 text-white px-5 py-2 rounded hover:bg-blue-800">
      â• Add Category
    </button>
  </form>
      </div>
    </main>

   <script>
  const tabs = document.querySelectorAll(".tab-btn");
  const contents = document.querySelectorAll(".tab-content");

  // Restore the last active tab from localStorage or default to "overview"
  const savedTab = localStorage.getItem("activeTab") || "overview";

  // Hide all and show the saved tab
  contents.forEach((c) => c.classList.add("hidden"));
  document.getElementById(savedTab).classList.remove("hidden");

  // Update active button styles
  tabs.forEach((tab) => {
    if (tab.getAttribute("data-tab") === savedTab) {
      tab.classList.add("text-blue-600", "border-b-2", "border-blue-600");
      tab.classList.remove("text-gray-600");
    } else {
      tab.classList.remove("text-blue-600", "border-b-2", "border-blue-600");
      tab.classList.add("text-gray-600");
    }

    // Add click event
    tab.addEventListener("click", () => {
      const activeTab = tab.getAttribute("data-tab");

      // Save the active tab to localStorage
      localStorage.setItem("activeTab", activeTab);

      // Hide all contents
      contents.forEach((c) => c.classList.add("hidden"));

      // Show the selected content
      document.getElementById(activeTab).classList.remove("hidden");

      // Update tab styles
      tabs.forEach((t) => {
        t.classList.remove("text-blue-600", "border-b-2", "border-blue-600");
        t.classList.add("text-gray-600");
      });

      tab.classList.add("text-blue-600", "border-b-2", "border-blue-600");
      tab.classList.remove("text-gray-600");
    });
  });
</script>



  </body>
</html>
